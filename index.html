<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–°—É–ø–µ—Ä –§–µ—Ä–º–µ—Ä Pro</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#10b981">
    <meta name="apple-mobile-web-app-capable" content="yes">
    
    <style>
        :root {
            --primary: #10b981; /* Emerald 500 */
            --primary-dark: #047857;
            --bg: #f8fafc; /* Slate 50 */
            --surface: #ffffff;
            --text-main: #334155; /* Slate 700 */
            --text-light: #64748b;
            --danger: #ef4444;
            --warning: #f59e0b;
            --border: #e2e8f0;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--bg);
            color: var(--text-main);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        .container { max-width: 500px; margin: 0 auto; width: 100%; }

        header { 
            text-align: center; 
            margin-bottom: 24px; 
            padding-bottom: 10px;
            border-bottom: 2px solid var(--border);
        }
        h1 { margin: 0; font-size: 1.25rem; font-weight: 800; color: var(--text-main); text-transform: uppercase; letter-spacing: 1px; }
        .subtitle { font-size: 0.85rem; color: var(--text-light); margin-top: 4px; }

        /* Controls */
        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--surface);
            padding: 12px 16px;
            border-radius: 12px;
            box-shadow: var(--shadow);
            margin-bottom: 20px;
        }
        .switch-label { font-size: 0.9rem; font-weight: 600; color: var(--text-main); }
        
        /* Toggle Switch */
        .switch { position: relative; display: inline-block; width: 44px; height: 24px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #cbd5e1; transition: .4s; border-radius: 24px; }
        .slider:before { position: absolute; content: ""; height: 18px; width: 18px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; box-shadow: 0 2px 4px rgba(0,0,0,0.2); }
        input:checked + .slider { background-color: var(--primary); }
        input:checked + .slider:before { transform: translateX(20px); }

        /* Farm Grid */
        .card {
            background: var(--surface);
            border-radius: 16px;
            box-shadow: var(--shadow);
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .section-header {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            font-weight: 700;
            color: var(--text-light);
            margin-bottom: 16px;
            text-align: center;
        }

        .input-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 12px;
            margin-bottom: 24px;
        }
        
        .dog-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            padding: 0 20px;
        }

        .animal-unit { display: flex; flex-direction: column; align-items: center; }
        .animal-icon { font-size: 1.8rem; margin-bottom: 8px; filter: drop-shadow(0 2px 2px rgba(0,0,0,0.1)); }
        
        input[type="tel"] {
            width: 100%;
            height: 48px;
            text-align: center;
            border: 2px solid var(--border);
            border-radius: 12px;
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text-main);
            background: #f1f5f9;
            transition: all 0.2s;
            -moz-appearance: textfield;
        }
        input[type="tel"]:focus { outline: none; border-color: var(--primary); background: #fff; }

        /* Dice Section */
        .dice-container {
            display: flex;
            justify-content: center;
            gap: 24px;
            margin: 10px 0 30px 0;
            perspective: 1000px;
        }

        .die {
            width: 80px;
            height: 80px;
            background: linear-gradient(145deg, #ffffff, #f0f0f0);
            border-radius: 16px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 5px 5px 10px #d1d5db, -5px -5px 10px #ffffff;
            border: 1px solid rgba(255,255,255,0.8);
            position: relative;
        }
        
        /* Green Die Border */
        .die.green-die { border-bottom: 4px solid #4ade80; }
        /* Red Die Border */
        .die.red-die { border-bottom: 4px solid #f87171; }

        .die-icon { font-size: 2.5rem; line-height: 1; }
        .die-label { font-size: 0.65rem; font-weight: 700; color: var(--text-light); margin-top: 4px; text-transform: uppercase; }

        /* Status & Logs */
        .status-area {
            min-height: 60px;
            margin-bottom: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .alert-box {
            padding: 16px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 0.95rem;
            display: flex;
            flex-direction: column;
            gap: 12px;
            animation: slideIn 0.3s ease-out;
        }
        .alert-danger { background-color: #fee2e2; color: #991b1b; border: 1px solid #fecaca; }
        .alert-success { background-color: #dcfce7; color: #166534; border: 1px solid #bbf7d0; text-align: center; }
        .alert-info { text-align: center; color: var(--text-light); font-style: italic; font-size: 0.9rem; }

        /* Buttons */
        .btn {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            cursor: pointer;
            transition: transform 0.1s, opacity 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .btn:active { transform: scale(0.98); }

        .btn-primary {
            background-color: var(--primary);
            color: white;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }
        .btn-primary:disabled { background-color: #cbd5e1; box-shadow: none; cursor: not-allowed; }

        .btn-action-group { display: flex; gap: 10px; }
        .btn-sm { padding: 12px; font-size: 0.8rem; flex: 1; }
        .btn-danger { background-color: var(--danger); color: white; }
        .btn-secondary { background-color: var(--text-main); color: white; }

        /* Animations */
        @keyframes shake {
            0% { transform: rotate(0deg); }
            25% { transform: rotate(10deg); }
            50% { transform: rotate(-10deg); }
            75% { transform: rotate(5deg); }
            100% { transform: rotate(0deg); }
        }
        .shaking { animation: shake 0.4s ease-in-out infinite; }
        
        @keyframes slideIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes flashGreen { 50% { background-color: #bbf7d0; transform: scale(1.05); } }
        .changed { animation: flashGreen 1s ease-out; }

    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>–°—É–ø–µ—Ä –§–µ—Ä–º–µ—Ä</h1>
            <div class="subtitle">–ê—Å–∏—Å—Ç–µ–Ω—Ç –ì—Ä–∞–≤—Ü—è</div>
        </header>

        <div class="controls">
            <span class="switch-label">–ê–≤—Ç–æ-–¥–æ–¥–∞–≤–∞–Ω–Ω—è —Ç–≤–∞—Ä–∏–Ω</span>
            <label class="switch">
                <input type="checkbox" id="autoMode" checked>
                <span class="slider"></span>
            </label>
        </div>

        <div class="card">
            <div class="section-header">–û—Å–Ω–æ–≤–Ω–µ –°—Ç–∞–¥–æ</div>
            <div class="input-grid">
                <div class="animal-unit"><div class="animal-icon">üê∞</div><input type="tel" id="inp-rabbit" value="0"></div>
                <div class="animal-unit"><div class="animal-icon">üêë</div><input type="tel" id="inp-sheep" value="0"></div>
                <div class="animal-unit"><div class="animal-icon">üê∑</div><input type="tel" id="inp-pig" value="0"></div>
                <div class="animal-unit"><div class="animal-icon">üêÆ</div><input type="tel" id="inp-cow" value="0"></div>
                <div class="animal-unit"><div class="animal-icon">üê¥</div><input type="tel" id="inp-horse" value="0"></div>
            </div>

            <div class="section-header" style="margin-top: 30px;">–û—Ö–æ—Ä–æ–Ω–∞</div>
            <div class="dog-grid">
                <div class="animal-unit">
                    <div class="animal-icon">üêï</div>
                    <input type="tel" id="inp-small-dog" value="0">
                </div>
                <div class="animal-unit">
                    <div class="animal-icon">üêï‚Äçü¶∫</div>
                    <input type="tel" id="inp-big-dog" value="0">
                </div>
            </div>
        </div>

        <div class="dice-container">
            <div id="d1" class="die green-die">
                <div class="die-icon" id="d1-icon">üé≤</div>
                <div class="die-label" id="d1-label">D1</div>
            </div>
            <div id="d2" class="die red-die">
                <div class="die-icon" id="d2-icon">üé≤</div>
                <div class="die-label" id="d2-label">D2</div>
            </div>
        </div>

        <div id="statusArea" class="status-area">
            <div class="alert-info">–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É, —â–æ–± –∫–∏–Ω—É—Ç–∏ –∫—É–±–∏–∫–∏</div>
        </div>

        <button id="rollBtn" class="btn btn-primary">–ö–∏–Ω—É—Ç–∏ –∫—É–±–∏–∫–∏</button>
    </div>

    <script>
        // --- CONFIG & RULES (GRANNA VERSION) ---
        // –ó–µ–ª–µ–Ω–∏–π –∫—É–±–∏–∫ (12 –≥—Ä–∞–Ω–µ–π)
        const DIE_GREEN = [
            {id:'rabbit', icon:'üê∞', name:'–ó–∞—î—Ü—å'}, {id:'rabbit', icon:'üê∞', name:'–ó–∞—î—Ü—å'}, 
            {id:'rabbit', icon:'üê∞', name:'–ó–∞—î—Ü—å'}, {id:'rabbit', icon:'üê∞', name:'–ó–∞—î—Ü—å'}, 
            {id:'rabbit', icon:'üê∞', name:'–ó–∞—î—Ü—å'}, {id:'rabbit', icon:'üê∞', name:'–ó–∞—î—Ü—å'},
            {id:'sheep', icon:'üêë', name:'–í—ñ–≤—Ü—è'}, {id:'sheep', icon:'üêë', name:'–í—ñ–≤—Ü—è'},
            {id:'sheep', icon:'üêë', name:'–í—ñ–≤—Ü—è'}, 
            {id:'pig', icon:'üê∑', name:'–°–≤–∏–Ω—è'}, 
            {id:'cow', icon:'üêÆ', name:'–ö–æ—Ä–æ–≤–∞'}, 
            {id:'wolf', icon:'üê∫', name:'–í–æ–≤–∫'}
        ];

        // –ß–µ—Ä–≤–æ–Ω–∏–π –∫—É–±–∏–∫ (12 –≥—Ä–∞–Ω–µ–π)
        const DIE_RED = [
            {id:'rabbit', icon:'üê∞', name:'–ó–∞—î—Ü—å'}, {id:'rabbit', icon:'üê∞', name:'–ó–∞—î—Ü—å'}, 
            {id:'rabbit', icon:'üê∞', name:'–ó–∞—î—Ü—å'}, {id:'rabbit', icon:'üê∞', name:'–ó–∞—î—Ü—å'}, 
            {id:'rabbit', icon:'üê∞', name:'–ó–∞—î—Ü—å'}, {id:'rabbit', icon:'üê∞', name:'–ó–∞—î—Ü—å'},
            {id:'sheep', icon:'üêë', name:'–í—ñ–≤—Ü—è'}, {id:'sheep', icon:'üêë', name:'–í—ñ–≤—Ü—è'},
            {id:'pig', icon:'üê∑', name:'–°–≤–∏–Ω—è'}, {id:'pig', icon:'üê∑', name:'–°–≤–∏–Ω—è'},
            {id:'horse', icon:'üê¥', name:'–ö—ñ–Ω—å'},
            {id:'fox', icon:'ü¶ä', name:'–õ–∏—Å–∏—Ü—è'}
        ];

        // --- STATE & UTILS ---
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        
        function getVal(id) { return parseInt(document.getElementById(`inp-${id}`).value) || 0; }
        function setVal(id, val) { 
            const el = document.getElementById(`inp-${id}`);
            el.value = Math.max(0, val);
            el.classList.remove('changed');
            void el.offsetWidth;
            el.classList.add('changed');
        }

        function playTone(type) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            
            const now = audioCtx.currentTime;
            if (type === 'roll') {
                osc.frequency.setValueAtTime(100, now);
                osc.frequency.linearRampToValueAtTime(300, now + 0.1);
                gain.gain.setValueAtTime(0.1, now);
                gain.gain.linearRampToValueAtTime(0, now + 0.1);
            } else if (type === 'danger') {
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(100, now);
                osc.frequency.linearRampToValueAtTime(50, now + 0.3);
                gain.gain.setValueAtTime(0.2, now);
                gain.gain.linearRampToValueAtTime(0, now + 0.3);
            } else if (type === 'success') {
                osc.type = 'sine';
                osc.frequency.setValueAtTime(400, now);
                osc.frequency.exponentialRampToValueAtTime(600, now + 0.2);
                gain.gain.setValueAtTime(0.1, now);
                gain.gain.linearRampToValueAtTime(0, now + 0.2);
            }
            osc.start(); osc.stop(now + 0.5);
        }

        function getSecureRandom(arr) {
            const cryptoArr = new Uint32Array(1);
            window.crypto.getRandomValues(cryptoArr);
            return arr[cryptoArr[0] % arr.length];
        }

        // --- GAME LOGIC ---
        document.getElementById('rollBtn').addEventListener('click', () => {
            const btn = document.getElementById('rollBtn');
            const d1El = document.getElementById('d1');
            const d2El = document.getElementById('d2');
            const statusArea = document.getElementById('statusArea');

            // Reset UI
            btn.disabled = true;
            statusArea.innerHTML = '';
            d1El.classList.add('shaking');
            d2El.classList.add('shaking');
            playTone('roll');

            if (navigator.vibrate) navigator.vibrate(20);

            setTimeout(() => {
                d1El.classList.remove('shaking');
                d2El.classList.remove('shaking');
                btn.disabled = false;

                const r1 = getSecureRandom(DIE_GREEN);
                const r2 = getSecureRandom(DIE_RED);

                // Update Dice UI
                document.getElementById('d1-icon').innerText = r1.icon;
                document.getElementById('d1-label').innerText = r1.name;
                document.getElementById('d2-icon').innerText = r2.icon;
                document.getElementById('d2-label').innerText = r2.name;

                processRound(r1, r2);

            }, 500);
        });

        function processRound(r1, r2) {
            const statusArea = document.getElementById('statusArea');
            const autoMode = document.getElementById('autoMode').checked;
            
            let isWolf = (r1.id === 'wolf');
            let isFox = (r2.id === 'fox');
            let isPredator = isWolf || isFox;

            // 1. –•–ò–ñ–ê–ö–ò (PREDATORS)
            if (isPredator) {
                playTone('danger');
                if (navigator.vibrate) navigator.vibrate([100, 50, 100]);

                let alertBox = document.createElement('div');
                alertBox.className = 'alert-box alert-danger';
                
                let msg = `‚ö†Ô∏è –£–í–ê–ì–ê: `;
                if (isWolf && isFox) msg += "–í–û–í–ö –¢–ê –õ–ò–°–ò–¶–Ø!";
                else if (isWolf) msg += "–í–û–í–ö!";
                else if (isFox) msg += "–õ–ò–°–ò–¶–Ø!";

                alertBox.innerHTML = `<span>${msg}</span>`;

                // –ö–Ω–æ–ø–∫–∏ –¥—ñ–π –¥–ª—è –õ–∏—Å–∏—Ü—ñ
                if (isFox) {
                    const group = document.createElement('div');
                    group.className = 'btn-action-group';
                    group.innerHTML = `
                        <button class="btn btn-sm btn-secondary" onclick="useDog('small')">üêï –ú—ñ–Ω—É—Å –º–∞–ª–∞ —Å–æ–±–∞–∫–∞</button>
                        <button class="btn btn-sm btn-danger" onclick="applyFoxDamage()">ü¶ä –°–ø–∏—Å–∞—Ç–∏ –∑–∞–π—Ü—ñ–≤</button>
                    `;
                    alertBox.appendChild(group);
                }

                // –ö–Ω–æ–ø–∫–∏ –¥—ñ–π –¥–ª—è –í–æ–≤–∫–∞
                if (isWolf) {
                    const group = document.createElement('div');
                    group.className = 'btn-action-group';
                    group.innerHTML = `
                        <button class="btn btn-sm btn-secondary" onclick="useDog('big')">üêï‚Äçü¶∫ –ú—ñ–Ω—É—Å –≤–µ–ª–∏–∫–∞ —Å–æ–±–∞–∫–∞</button>
                        <button class="btn btn-sm btn-danger" onclick="applyWolfDamage()">üê∫ –°–ø–∏—Å–∞—Ç–∏ —Å—Ç–∞–¥–æ</button>
                    `;
                    alertBox.appendChild(group);
                }

                statusArea.appendChild(alertBox);
                
                // –Ø–∫—â–æ —î —Ö–∏–∂–∞–∫, –º–∏ –ù–ï –¥–æ–¥–∞—î–º–æ —Ç–≤–∞—Ä–∏–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ (–Ω–∞–≤—ñ—Ç—å —è–∫—â–æ autoMode –≤–≤—ñ–º–∫–Ω–µ–Ω–æ),
                // –±–æ —Å–ø–æ—á–∞—Ç–∫—É —Ç—Ä–µ–±–∞ –≤–∏—Ä—ñ—à–∏—Ç–∏ –¥–æ–ª—é —Å—Ç–∞–¥–∞. 
                // –ê–ª–µ —â–æ–± –¥–æ–ø–æ–º–æ–≥—Ç–∏ –≥—Ä–∞–≤—Ü—é, –º–∏ –ø–æ–∫–∞–∂–µ–º–æ, —Ö—Ç–æ –ú–Ü–ì –ë–ò –Ω–∞—Ä–æ–¥–∏—Ç–∏—Å—è, —è–∫—â–æ –≤–æ–Ω–∏ –≤–∏–∂–∏–≤—É—Ç—å.
                const potential = calculateGrowth(r1, r2);
                if (potential.length > 0) {
                    let info = document.createElement('div');
                    info.className = 'alert-info';
                    info.innerHTML = `–ü—ñ—Å–ª—è –∑–∞—Ö–∏—Å—Ç—É –≤—ñ–¥ —Ö–∏–∂–∞–∫—ñ–≤, –¥–æ–¥–∞–π—Ç–µ –≤—Ä—É—á–Ω—É: <br><b>${potential.join(', ')}</b>`;
                    statusArea.appendChild(info);
                }
                
                return; // –ó—É–ø–∏–Ω—è—î–º–æ—Å—è, —á–µ–∫–∞—î–º–æ –¥—ñ—ó –≥—Ä–∞–≤—Ü—è
            }

            // 2. –ú–ò–†–ù–ò–ô –†–Ü–°–¢ (GROWTH)
            playTone('success');
            const changes = calculateGrowth(r1, r2);
            
            if (changes.length > 0) {
                // –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è
                let successBox = document.createElement('div');
                successBox.className = 'alert-box alert-success';
                successBox.innerHTML = `üéâ –ü—Ä–∏—Ä—ñ—Å—Ç:<br>${changes.join(', ')}`;
                statusArea.appendChild(successBox);

                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è
                if (autoMode) {
                    applyGrowthLogic(r1, r2);
                }
            } else {
                statusArea.innerHTML = '<div class="alert-info">–ë–µ–∑ –ø—Ä–∏—Ä–æ—Å—Ç—É</div>';
            }
            
            checkVictory();
        }

        // –õ–æ–≥—ñ–∫–∞ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É –ø–∞—Ä
        function calculateGrowth(r1, r2) {
            let counts = {};
            [r1, r2].forEach(r => counts[r.id] = (counts[r.id] || 0) + 1);
            
            let result = [];
            ['rabbit', 'sheep', 'pig', 'cow', 'horse'].forEach(type => {
                let onDice = counts[type] || 0;
                if (onDice > 0) {
                    let onFarm = getVal(type);
                    let total = onDice + onFarm;
                    let newBorn = Math.floor(total / 2);
                    if (newBorn > 0) {
                        result.push(`+${newBorn} ${getIcon(type)}`);
                    }
                }
            });
            return result;
        }

        function applyGrowthLogic(r1, r2) {
            let counts = {};
            [r1, r2].forEach(r => counts[r.id] = (counts[r.id] || 0) + 1);
            
            ['rabbit', 'sheep', 'pig', 'cow', 'horse'].forEach(type => {
                let onDice = counts[type] || 0;
                if (onDice > 0) {
                    let onFarm = getVal(type);
                    let newBorn = Math.floor((onFarm + onDice) / 2);
                    if (newBorn > 0) setVal(type, onFarm + newBorn);
                }
            });
        }

        // Helper Actions
        window.useDog = function(size) {
            const id = size === 'small' ? 'small-dog' : 'big-dog';
            let current = getVal(id);
            if (current > 0) {
                setVal(id, current - 1);
                removeAlertButton(event.target);
            } else {
                alert("–£ –≤–∞—Å –Ω–µ–º–∞—î —Ç–∞–∫–æ—ó —Å–æ–±–∞–∫–∏!");
            }
        }

        window.applyFoxDamage = function() {
            if(confirm("–õ–∏—Å–∏—Ü—è –∑'—ó—Å—Ç—å —É—Å—ñ—Ö –∑–∞–π—Ü—ñ–≤. –ü—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏?")) {
                setVal('rabbit', 0); // –¢—ñ–ª—å–∫–∏ –∑–∞–π—Ü—ñ
                removeAlertButton(event.target);
            }
        }

        window.applyWolfDamage = function() {
            if(confirm("–í–æ–≤–∫ –∑'—ó—Å—Ç—å –æ–≤–µ—Ü—å, —Å–≤–∏–Ω–µ–π —Ç–∞ –∫–æ—Ä—ñ–≤. –ü—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏?")) {
                setVal('sheep', 0);
                setVal('pig', 0);
                setVal('cow', 0);
                // –ó–∞—î—Ü—å —Ç–∞ –ö—ñ–Ω—å –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è
                removeAlertButton(event.target);
            }
        }

        function removeAlertButton(btn) {
            // –ü—Ä–∏—Ö–æ–≤—É—î–º–æ –∫–Ω–æ–ø–∫—É –ø—ñ—Å–ª—è –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è, —â–æ–± –Ω–µ –Ω–∞—Ç–∏—Å–Ω—É—Ç–∏ –¥–≤—ñ—á—ñ
            btn.closest('.alert-box').style.opacity = '0.5';
            btn.parentElement.remove();
        }
        
        function checkVictory() {
            if (getVal('rabbit') > 0 && getVal('sheep') > 0 && getVal('pig') > 0 && 
                getVal('cow') > 0 && getVal('horse') > 0) {
                
                const statusArea = document.getElementById('statusArea');
                let winBox = document.createElement('div');
                winBox.className = 'alert-box alert-success';
                winBox.style.backgroundColor = '#ecfccb';
                winBox.style.border = '2px solid #84cc16';
                winBox.innerHTML = `üèÜ <b>–°–£–ü–ï–† –§–ï–†–ú–ï–†!</b><br>–í–∏ –∑—ñ–±—Ä–∞–ª–∏ –≤—Å—ñ—Ö —Ç–≤–∞—Ä–∏–Ω!`;
                statusArea.prepend(winBox);
                
                if (navigator.vibrate) navigator.vibrate([200, 100, 200, 100, 500]);
            }
        }

        function getIcon(type) {
            const icons = {rabbit:'üê∞', sheep:'üêë', pig:'üê∑', cow:'üêÆ', horse:'üê¥'};
            return icons[type] || '';
        }

        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js');
        }
    </script>
</body>
</html>
